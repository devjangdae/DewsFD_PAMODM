<!--##e630ee84-fbd8-48e2-ad6a-1a6a0e28d816##-->
<!--##PAMODM01800##-->
<!--##bc0rzF69XJhswH7zIdQiiMprxJKNkud+13zptv6+zhA=##-->
<!--
  DEWS UI/UX IDE - Build Result - v1.5
  # PageID: PAMODM01800
  # PageTitle: [한국동서발전]행사참가직원등록
  # Server: http://localhost:8090/
-->
<!--

-->

<div id="conditionpanel1" class="dews-ui-condition-panel">
  <ul class="required-area">
    <li>
      <label class="dews-ui-multilingual">사업장</label>
      <span>
        <input type="text" id="cdp1" name="cdp1" class="dews-ui-codepicker" data-dews-help-code="H_MA_COMPANY_S" data-dews-code-field="COMPANY_CD" data-dews-text-field="COMPANY_NM" data-dews-help-title="회사 도움창" data-dews-help-custom="false" data-dews-help-size="medium" data-dews-use-keyword="false" />
      </span>
    </li>
    <li>
      <label class="dews-ui-multilingual">부서</label>
      <span>
        <select id="mcdp1" name="mcdp1" class="dews-ui-multicodepicker" data-dews-help-code="H_MA_DEPT_MST_S" data-dews-code-field="DEPT_LV" data-dews-text-field="DEPT_LV" data-dews-help-title="부서 도움창" data-dews-help-custom="false" data-dews-help-size="medium" />
      </span>
    </li>
    <li>
      <label class="dews-ui-multilingual">기간</label>
      <span>
        <span id="pp1" class="dews-ui-periodpicker basic"></span>
      </span>
    </li>
  </ul>
  <ul class="optional-area">
    <li>
      <label class="dews-ui-multilingual">휴무유형</label>
      <span>
        <select id="mcdp2" name="mcdp2" class="dews-ui-multicodepicker basic" data-dews-help-custom="false" data-dews-help-size="medium" />
      </span>
    </li>
  </ul>
</div>
<div id="containerpanel1" class="dews-ui-container-panel" data-dews-fit-bottom="true">
  <div id="containerpanelitem1" class="dews-container-item" data-dews-position="normal">
    <div id="grid1" class="dews-ui-grid"></div>
  </div>
</div>

<style>
    
</style>



<script>
  dews.ready(function () {
    var self = this;
    self.version = self.version || {};
    self.version.view='1.0';


    /*b0c72068-ba69-4099-9af5-d9863bacd226*/ 
    //self.cdp1~~~
    
    
    
    
    self.ds1 = dews.ui.dataSource('ds1', {
      grid: true,
      transport: {
        read: {
          type: 'post',
          url: dews.url.getApiUrl('HR', 'PAMODM01800Service', 'pamodm01800_listMaster'),
          data: function () {
            return {
              dof_tp: self.mcdp2.texts().join('|'),
              start_dt: self.pp1.getStartDate(),
              end_dt: self.pp1.getEndDate(),
              dept_cd: self.mcdp1.texts().join('|'),
              company_cd: self.cdp1.code()
            };
          }
        }
      },
      schema: {
        model: {
          fields: [
            { field: 'EMP_NO', editable: false, dataType: 'string' }, 
            { field: 'KOR_NM', editable: false, dataType: 'string' }, 
            { field: 'DEPT_CD', editable: false, dataType: 'string' }, 
            { field: 'OGRP_CD', editable: false, dataType: 'string' }, 
            { field: 'PSTN_CD', editable: false, dataType: 'string' }, 
            { field: 'JNCO_DT', editable: false, dataType: 'string' }, 
            { field: 'MNG_DC93', editable: false, dataType: 'string' }, 
            { field: 'MNG_DC50', editable: false, dataType: 'string' }, 
            { field: 'START_DT', editable: false, dataType: 'string' }, 
            { field: 'END_DT', editable: false, dataType: 'string' }, 
            { field: 'TM_CD_NM', editable: false, dataType: 'string' }, 
            { field: 'DOF_TP', editable: false, dataType: 'string' }, 
            { field: 'START_TM', editable: false, dataType: 'string' }, 
            { field: 'END_TM', editable: false, dataType: 'string' }, 
            { field: 'DOF_TM_CNT', editable: false, dataType: 'number' }, 
            { field: 'LVE_TM_CNT', editable: false, dataType: 'number' }
          ]
    
        }
      }
    });
    
    
    dews.ui.mainbuttons.localize.disable(true);
    dews.ui.mainbuttons.search.click(/*3516b08b-047a-4054-b023-cb9f10a0b781*/ function () {
    
        // TODO: 필수항목 입력을 체크한 후 데이터소스를 조회합니다.
        // if (self.containerpanel1.validate({ tooltip: true, message: '필수 항목을 입력해 주십시요.' })) {
        //     self.ds1.read();
        //     alert(1);
        // }
        self.ds1.read();
        alert(1);
        // TODO: 저장여부를 확인한 후 데이터소스를 조회합니다.
        // if (self.dataSource1.getDirtyDataCount() != 0) {
        //   dews.confirm('저장하지 않은 데이터가 있습니다. 조회를 계속하시겠습니까?', 'ico2').yes(function () {
        //     self.dataSource1.read();
        //   }).no(function () {
        //     dews.ui.snackbar.warning('취소되었습니다.');
        //     return false;
        //   });
        // } else {
        //   self.dataSource1.read();
        // }
    });
    dews.ui.grid(self.$grid1, {
      dataSource: self.ds1,
      sortable: false,
      checkable: false,
      copyMode: 'cell',
      columns: [
        {
          field: 'EMP_NO',
          title: '사원번호',
          width: 60
        },
        {
          field: 'KOR_NM',
          title: '성명',
          width: 90,
          align: 'left'
        },
        {
          field: 'DEPT_CD',
          title: '부서코드',
          width: 80
        },
        {
          field: 'OGRP_CD',
          title: '직군코드',
          width: 80
        },
        {
          field: 'PSTN_CD',
          title: '직급코드',
          width: 80
        },
        {
          field: 'JNCO_DT',
          title: '입사일',
          width: 80,
          formats: {
            type: 'date',
            format: 'yyyy-MM-dd'
          },
          editor: {
            type: 'date',
            format: 'yyyy-MM-dd'
          }
        },
        {
          field: 'MNG_DC93',
          title: '승격일',
          width: 60
        },
        {
          field: 'MNG_DC50',
          title: '퇴직예정일',
          width: 60
        },
        {
          field: 'START_DT',
          title: '시작일',
          width: 80,
          formats: {
            type: 'date',
            format: 'yyyy-MM-dd'
          },
          editor: {
            type: 'date',
            format: 'yyyy-MM-dd'
          }
        },
        {
          field: 'END_DT',
          title: '종료일',
          width: 80,
          formats: {
            type: 'date',
            format: 'yyyy-MM-dd'
          },
          editor: {
            type: 'date',
            format: 'yyyy-MM-dd'
          }
        },
        {
          field: 'TM_CD_NM',
          title: '시간코드명',
          width: 90,
          align: 'left'
        },
        {
          field: 'DOF_TP',
          title: '휴무유형',
          width: 60
        },
        {
          field: 'START_TM',
          title: '시작시간',
          width: 60
        },
        {
          field: 'END_TM',
          title: '종료시간',
          width: 60
        },
        {
          field: 'DOF_TM_CNT',
          title: '휴무시간수',
          width: 60
        },
        {
          field: 'LVE_TM_CNT',
          title: '이탈시간수',
          width: 60
        }
      ],
      fixed: {
        colCount: 0,
        rightColCount: 0
      }
    });
    
    
    
    
    

  
  });

</script>